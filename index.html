<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>India First Languages & Religious Influence | Interactive Map</title>
  
  <!-- 1. æ­£ç¡®å¼•å…¥ Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    :root{
      --bg:#f7f7f9;--panel:#ffffff;--shadow:rgba(0,0,0,0.12);
      --accent:#0b70d6;--red:#e74c3c;--green:#2ecc71;--blue:#3498db;--orange:#f39c12;--purple:#9b59b6;
    }
    html,body{height:100%;margin:0;padding:0;background:var(--bg);font-family:system-ui,-apple-system,sans-serif;}
    #map{height:100vh;width:100vw;}
    .panel{
      position:absolute;top:10px;left:10px;right:10px;z-index:1000;background:var(--panel);
      padding:12px;border-radius:12px;box-shadow:0 8px 32px var(--shadow);max-width:calc(100vw - 20px);
      font-size:14px;overflow:auto;max-height:80vh;
    }
    .panel h1{margin:0 0 8px;font-size:18px;}
    .toggle label{display:block;margin:10px 0;}
    .legend .row{display:flex;align-items:center;margin:6px 0;}
    .swatch{width:20px;height:20px;border-radius:50%;margin-right:10px;flex-shrink:0;}
    .footer{
      position:absolute;bottom:10px;right:10px;z-index:1000;background:var(--panel);
      padding:6px 10px;border-radius:10px;box-shadow:0 4px 12px var(--shadow);font-size:11px;opacity:0.8;
    }
    @media (max-width:480px){
      .panel{padding:10px;top:5px;left:5px;right:5px;}
      .panel h1{font-size:16px;}
    }
  </style>
</head>
<body>
  <div class="panel">
    <h1>Indiaâ€™s First Languages & Religious Influence</h1>
    <p tap any marker â†’ details Â· use toggles below</p>
    <div class="toggle">
      <label><input type="checkbox" id="langLayerChk" checked> Language family (color)</label>
      <label><input type="checkbox" id="religLayerChk" checked> Religion influence (ğŸ•‰ï¸â˜ªï¸âœï¸)</label>
      <label><input type="checkbox" id="mixLayerChk" checked> Hinglish / local-English mixing intensity</label>
    </div>
    <div class="legend">
      <strong>Language family:</strong>
      <div class="row"><span class="swatch" style="background:#f39c12"></span>Indo-Aryan</div>
      <div class="row"><span class="swatch" style="background:#3498db"></span>Dravidian</div>
      <div class="row"><span class="swatch" style="background:#2ecc71"></span>Tibeto-Burman</div>
      <div class="row"><span class="swatch" style="background:#9b59b6"></span>Other/Mixed</div>
      <strong>Mixing intensity:</strong> bigger red circle = more Hinglish / local-English code-mixing
    </div>
  </div>

  <div id="map"></div>
  <div class="footer">Data simplified â€¢ Tap markers for details</div>

  <!-- 2. æ­£ç¡®å¼•å…¥ Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // åˆå§‹åŒ–åœ°å›¾
    const map = L.map('map').setView([22.5, 79], 5);

    // ä½¿ç”¨å›½å†…åŠ é€Ÿ + å¤‡ç”¨ OSM
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 12,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const famColor = { 'Indo-Aryan':'#f39c12', 'Dravidian':'#3498db', 'Tibeto-Burman':'#2ecc71', 'Other':'#9b59b6' };

    const states = [ /* ä½ åŸæ¥çš„ states æ•°æ®å®Œå…¨ä¿ç•™ï¼Œè¿™é‡Œçœç•¥ä»¥èŠ‚çœç¯‡å¹…ï¼Œç›´æ¥å¤åˆ¶ä½ åŸæ¥çš„å³å¯ */ 
      {name:'Delhi', lat:28.61, lon:77.21, lang:'Hindi', family:'Indo-Aryan', religion:['Hindu','Muslim'], mixing:'Hinglish High'},
      {name:'Uttar Pradesh', lat:26.85, lon:80.95, lang:'Hindi', family:'Indo-Aryan', religion:['Hindu','Muslim'], mixing:'Hinglish High'},
      // ... ä¸­é—´æ‰€æœ‰æ•°æ®ä¿æŒä¸å˜
      {name:'Andhra Pradesh', lat:16.52, lon:80.64, lang:'Telugu', family:'Dravidian', religion:['Hindu','Muslim','Christian'], mixing:'English-Telugu Medium'}
    ];

    const languageLayer = L.layerGroup().addTo(map);
    const religionLayer = L.layerGroup().addTo(map);
    const mixingLayer    = L.layerGroup().addTo(map);

    states.forEach(s => {
      // è¯­è¨€å®¶æ—åœ†ç‚¹
      L.circleMarker([s.lat, s.lon], {
        radius: 11,
        weight: 2,
        color: '#fff',
        fillColor: famColor[s.family] || '#777',
        fillOpacity: 0.95
      }).bindPopup(`<b>${s.name}</b><br>First language: ${s.lang}<br>Family: ${s.family}`)
        .addTo(languageLayer);

      // å®—æ•™å›¾æ ‡
      let symbol = 'ğŸ•‰ï¸';
      if (s.religion.includes('Christian')) symbol = 'âœï¸';
      else if (s.religion.includes('Muslim')) symbol = 'â˜ªï¸';
      const icon = L.divIcon({html: `<div style="font-size:28px;">${symbol}</div>`, iconSize: [30,30], className: 'dummy'});
      L.marker([s.lat, s.lon], {icon})
        .bindPopup(`<b>${s.name}</b><br>Religion: ${s.religion.join(' Â· ')}`)
        .addTo(religionLayer);

      // ä»£ç æ··ç”¨å¼ºåº¦ï¼ˆçº¢åœˆï¼‰
      const intensity = s.mixing.includes('High') ? 35 : s.mixing.includes('Medium') ? 22 : 12;
      L.circle([s.lat, s.lon], {
        radius: intensity * 12000,
        color: '#e74c3c',
        fillColor: '#e74c3c',
        fillOpacity: 0.22,
        weight: 1.5
      }).bindPopup(`<b>${s.name}</b><br>Code-mixing: ${s.mixing}`)
        .addTo(mixingLayer);
    });

    // å¼€å…³
    document.getElementById('langLayerChk').onchange = e => map[e.target.checked ? 'addLayer' : 'removeLayer'](languageLayer);
    document.getElementById('religLayerChk').onchange = e => map[e.target.checked ? 'addLayer' : 'removeLayer'](religionLayer);
    document.getElementById('mixLayerChk').onchange   = e => map[e.target.checked ? 'addLayer' : 'removeLayer'](mixingLayer);
  </script>
</body>
</html>